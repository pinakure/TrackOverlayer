<!DOCTYPE html>
<html>
    <head>
    <link rel="stylesheet" type="text/css" href="./{% name %}.css"/>
    <style>
        * {
            font-size       : var(--digits-font-size);
            font-family     : var(--digits-font);   
            color           : var(--digits-color);  
            font-weight     : var(--digits-font-bold);          
            font-style      : var(--digits-font-italic);
            line-height     : var(--digits-line-height);
        }
        {% fonts %}
    </style>
    <script>
        // TODO: Convert pybooleans to jsbooleans before dumping variables!
        const False = false;
        const True = true;
    </script>
    </head>
    <body>
        <div class="{% name %}" id="{% name %}">40:40:40</div>    
    </body>
    <script>
        var {% Name %} = {
            
            dom : {
                {% name %} : document.getElementById('{% name %}'),
            },

            loadSettings : function(){
                try {
                    {% Name %}.settings = JSON.parse(localStorage.getItem('{% name %}-settings'));
                    settings.update.rate = 1;
                } catch (e){
                    // This object must be autogenerated by RAMon
                    // {% settings %}
                    {% Name %}.settings = {
                        update   : {
                            rate    : 1,
                        },
                        analogic : {% analogic %},                        
                        digits   : {
                            color   : '{% digits-color %}',
                            font    : {
                                type        : "{% digits-font %}",
                                size        :  {% digits-font-size %},
                                bold        :  {% digits-font-bold %},
                                italic      :  {% digits-font-italic %},
                            },
                            line    : {
                                height      : {% digits-line-height %},
                            },
                            pos     : {
                                x           : {% digits-pos-x %},
                                y           : {% digits-pos-y %},
                            },
                            shadow  : {
                                color       : '{% digits-shadow %}',
                                blur        : {% digits-shadow-blur %},
                                pos         : {
                                    x           : {% digits-shadow-pos-x %},
                                    y           : {% digits-shadow-pos-y %},
                                },
                            },
                            border : {
                                color       : '{% digits-border-color %}',
                                width       :  {% digits-border-width %},
                                radius      :  {% digits-border-radius %},
                            },
                        },
                    };
                }
            },
            
            update : function(){
                var date = new Date;
                {% Name %}.dom.{% name %}.innerHTML = `${date}`.split('GMT')[0].split(' ')[4];
                // Call again for the update function after a second, like any clock...
                setTimeout({% Name %}.update, {% Name %}.settings.update.rate*1000);
            },

            start : function(){
                {% Name %}.loadSettings();
                {% Name %}.update();                
            },
        };
        {% update-css %}        
        {% Name %}.start();

    </script>
</html>